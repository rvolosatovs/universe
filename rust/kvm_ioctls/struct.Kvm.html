<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Wrapper over KVM system ioctls."><meta name="keywords" content="rust, rustlang, rust-lang, Kvm"><title>Kvm in kvm_ioctls - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../kvm_ioctls/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../kvm_ioctls/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Kvm</a></h2><div class="sidebar-elems"><section><div class="block"><h3 class="sidebar-title"><a href="#implementations">Methods</a></h3><ul><li><a href="#method.check_extension">check_extension</a></li><li><a href="#method.check_extension_int">check_extension_int</a></li><li><a href="#method.create_vm">create_vm</a></li><li><a href="#method.create_vm_with_type">create_vm_with_type</a></li><li><a href="#method.create_vmfd_from_rawfd">create_vmfd_from_rawfd</a></li><li><a href="#method.get_api_version">get_api_version</a></li><li><a href="#method.get_emulated_cpuid">get_emulated_cpuid</a></li><li><a href="#method.get_max_vcpu_id">get_max_vcpu_id</a></li><li><a href="#method.get_max_vcpus">get_max_vcpus</a></li><li><a href="#method.get_msr_index_list">get_msr_index_list</a></li><li><a href="#method.get_nr_memslots">get_nr_memslots</a></li><li><a href="#method.get_nr_vcpus">get_nr_vcpus</a></li><li><a href="#method.get_supported_cpuid">get_supported_cpuid</a></li><li><a href="#method.get_vcpu_mmap_size">get_vcpu_mmap_size</a></li><li><a href="#method.new">new</a></li><li><a href="#method.new_with_path">new_with_path</a></li><li><a href="#method.open_with_cloexec">open_with_cloexec</a></li><li><a href="#method.open_with_cloexec_at">open_with_cloexec_at</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#trait-implementations">Trait Implementations</a></h3><ul><li><a href="#impl-AsRawFd">AsRawFd</a></li><li><a href="#impl-Debug">Debug</a></li><li><a href="#impl-FromRawFd">FromRawFd</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><ul><li><a href="#impl-RefUnwindSafe">RefUnwindSafe</a></li><li><a href="#impl-Send">Send</a></li><li><a href="#impl-Sync">Sync</a></li><li><a href="#impl-Unpin">Unpin</a></li><li><a href="#impl-UnwindSafe">UnwindSafe</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#blanket-implementations">Blanket Implementations</a></h3><ul><li><a href="#impl-Any">Any</a></li><li><a href="#impl-Borrow%3CT%3E">Borrow&lt;T&gt;</a></li><li><a href="#impl-BorrowMut%3CT%3E">BorrowMut&lt;T&gt;</a></li><li><a href="#impl-From%3CT%3E">From&lt;T&gt;</a></li><li><a href="#impl-Into%3CU%3E">Into&lt;U&gt;</a></li><li><a href="#impl-TryFrom%3CU%3E">TryFrom&lt;U&gt;</a></li><li><a href="#impl-TryInto%3CU%3E">TryInto&lt;U&gt;</a></li></ul></div></section><h2 class="location"><a href="index.html">In kvm_ioctls</a></h2><div id="sidebar-vars" data-name="Kvm" data-ty="struct" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../kvm_ioctls/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><div class="theme-picker hidden"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="22" height="22" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Struct <a href="index.html">kvm_ioctls</a>::<wbr><a class="struct" href="#">Kvm</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#28-30">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust struct"><code>pub struct Kvm { /* private fields */ }</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Wrapper over KVM system ioctls.</p>
</div></details><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor"></a></h2><div id="implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#32-585">source</a></span><a href="#impl" class="anchor"></a><h3 class="code-header in-band">impl <a class="struct" href="struct.Kvm.html" title="struct kvm_ioctls::Kvm">Kvm</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.new" class="method has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#42-48">source</a></span><a href="#method.new" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.new" class="fnname">new</a>() -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Self, <a class="struct" href="struct.Error.html" title="struct kvm_ioctls::Error">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Opens <code>/dev/kvm</code> and returns a <code>Kvm</code> object on success.</p>
<h5 id="example"><a href="#example">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">kvm_ioctls::Kvm</span>;
<span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="ident">Kvm::new</span>().<span class="ident">unwrap</span>();</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.new_with_path" class="method has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#65-74">source</a></span><a href="#method.new_with_path" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.new_with_path" class="fnname">new_with_path</a>&lt;P&gt;(kvm_path: P) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;Self, <a class="struct" href="struct.Error.html" title="struct kvm_ioctls::Error">Error</a>&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;P: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/std/ffi/c_str/struct.CStr.html" title="struct std::ffi::c_str::CStr">CStr</a>&gt;,&nbsp;</span></h4></section></summary><div class="docblock"><p>Opens the KVM device at <code>kvm_path</code> and returns a <code>Kvm</code> object on success.</p>
<h5 id="arguments"><a href="#arguments">Arguments</a></h5>
<ul>
<li><code>kvm_path</code>: path to the KVM device. Usually it is <code>/dev/kvm</code>.</li>
</ul>
<h5 id="example-1"><a href="#example-1">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">kvm_ioctls::Kvm</span>;
<span class="kw">use</span> <span class="ident">std::ffi::CString</span>;
<span class="kw">let</span> <span class="ident">kvm_path</span> <span class="op">=</span> <span class="ident">CString::new</span>(<span class="string">&quot;/dev/kvm&quot;</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="ident">Kvm::new_with_path</span>(<span class="kw-2">&amp;</span><span class="ident">kvm_path</span>).<span class="ident">unwrap</span>();</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.open_with_cloexec" class="method has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#97-101">source</a></span><a href="#method.open_with_cloexec" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.open_with_cloexec" class="fnname">open_with_cloexec</a>(close_on_exec: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="type" href="https://doc.rust-lang.org/nightly/std/os/fd/raw/type.RawFd.html" title="type std::os::fd::raw::RawFd">RawFd</a>, <a class="struct" href="struct.Error.html" title="struct kvm_ioctls::Error">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Opens <code>/dev/kvm</code> and returns the fd number on success.</p>
<p>One usecase for this method is opening <code>/dev/kvm</code> before exec-ing into a
process with seccomp filters enabled that blacklist the <code>sys_open</code> syscall.
For this usecase <code>open_with_cloexec</code> must be called with the <code>close_on_exec</code>
parameter set to false.</p>
<h5 id="arguments-1"><a href="#arguments-1">Arguments</a></h5>
<ul>
<li><code>close_on_exec</code>: If true opens <code>/dev/kvm</code> using the <code>O_CLOEXEC</code> flag.</li>
</ul>
<h5 id="example-2"><a href="#example-2">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">kvm_fd</span> <span class="op">=</span> <span class="ident">Kvm::open_with_cloexec</span>(<span class="bool-val">false</span>).<span class="ident">unwrap</span>();
<span class="comment">// The `kvm_fd` can now be passed to another process where we can use</span>
<span class="comment">// `from_raw_fd` for creating a `Kvm` object:</span>
<span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Kvm::from_raw_fd</span>(<span class="ident">kvm_fd</span>) };</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.open_with_cloexec_at" class="method has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#124-136">source</a></span><a href="#method.open_with_cloexec_at" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.open_with_cloexec_at" class="fnname">open_with_cloexec_at</a>&lt;P&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;path: P, <br>&nbsp;&nbsp;&nbsp;&nbsp;close_on_exec: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="type" href="https://doc.rust-lang.org/nightly/std/os/fd/raw/type.RawFd.html" title="type std::os::fd::raw::RawFd">RawFd</a>, <a class="struct" href="struct.Error.html" title="struct kvm_ioctls::Error">Error</a>&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;P: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/std/ffi/c_str/struct.CStr.html" title="struct std::ffi::c_str::CStr">CStr</a>&gt;,&nbsp;</span></h4></section></summary><div class="docblock"><p>Opens the KVM device at <code>kvm_path</code> and returns the fd number on success.
Same as <a href="struct.Kvm.html#method.open_with_cloexec">open_with_cloexec()</a>
except this method opens <code>kvm_path</code> instead of <code>/dev/kvm</code>.</p>
<h5 id="arguments-2"><a href="#arguments-2">Arguments</a></h5>
<ul>
<li><code>kvm_path</code>: path to the KVM device. Usually it is <code>/dev/kvm</code>.</li>
<li><code>close_on_exec</code>: If true opens <code>kvm_path</code> using the <code>O_CLOEXEC</code> flag.</li>
</ul>
<h5 id="example-3"><a href="#example-3">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">kvm_path</span> <span class="op">=</span> <span class="ident">CString::new</span>(<span class="string">&quot;/dev/kvm&quot;</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">kvm_fd</span> <span class="op">=</span> <span class="ident">Kvm::open_with_cloexec_at</span>(<span class="ident">kvm_path</span>, <span class="bool-val">false</span>).<span class="ident">unwrap</span>();
<span class="comment">// The `kvm_fd` can now be passed to another process where we can use</span>
<span class="comment">// `from_raw_fd` for creating a `Kvm` object:</span>
<span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Kvm::from_raw_fd</span>(<span class="ident">kvm_fd</span>) };</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_api_version" class="method has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#149-153">source</a></span><a href="#method.get_api_version" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.get_api_version" class="fnname">get_api_version</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i32.html">i32</a></h4></section></summary><div class="docblock"><p>Returns the KVM API version.</p>
<p>See the documentation for <code>KVM_GET_API_VERSION</code>.</p>
<h5 id="example-4"><a href="#example-4">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="ident">Kvm::new</span>().<span class="ident">unwrap</span>();
<span class="macro">assert_eq!</span>(<span class="ident">kvm</span>.<span class="ident">get_api_version</span>(), <span class="number">12</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.check_extension_int" class="method has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#197-201">source</a></span><a href="#method.check_extension_int" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.check_extension_int" class="fnname">check_extension_int</a>(&amp;self, c: <a class="enum" href="enum.Cap.html" title="enum kvm_ioctls::Cap">Cap</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.i32.html">i32</a></h4></section></summary><div class="docblock"><p>Wrapper over <code>KVM_CHECK_EXTENSION</code>.</p>
<p>Returns 0 if the capability is not available and a positive integer otherwise.
See the documentation for <code>KVM_CHECK_EXTENSION</code>.</p>
<h5 id="arguments-3"><a href="#arguments-3">Arguments</a></h5>
<ul>
<li><code>c</code> - KVM capability to check.</li>
</ul>
<h5 id="example-5"><a href="#example-5">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">kvm_ioctls::Cap</span>;

<span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="ident">Kvm::new</span>().<span class="ident">unwrap</span>();
<span class="macro">assert!</span>(<span class="ident">kvm</span>.<span class="ident">check_extension_int</span>(<span class="ident">Cap::MaxVcpuId</span>) <span class="op">&gt;</span> <span class="number">0</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.check_extension" class="method has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#222-224">source</a></span><a href="#method.check_extension" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.check_extension" class="fnname">check_extension</a>(&amp;self, c: <a class="enum" href="enum.Cap.html" title="enum kvm_ioctls::Cap">Cap</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Checks if a particular <code>Cap</code> is available.</p>
<p>Returns true if the capability is supported and false otherwise.
See the documentation for <code>KVM_CHECK_EXTENSION</code>.</p>
<h5 id="arguments-4"><a href="#arguments-4">Arguments</a></h5>
<ul>
<li><code>c</code> - KVM capability to check.</li>
</ul>
<h5 id="example-6"><a href="#example-6">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">kvm_ioctls::Cap</span>;

<span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="ident">Kvm::new</span>().<span class="ident">unwrap</span>();
<span class="comment">// Check if `KVM_CAP_USER_MEMORY` is supported.</span>
<span class="macro">assert!</span>(<span class="ident">kvm</span>.<span class="ident">check_extension</span>(<span class="ident">Cap::UserMemory</span>));</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_vcpu_mmap_size" class="method has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#237-245">source</a></span><a href="#method.get_vcpu_mmap_size" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.get_vcpu_mmap_size" class="fnname">get_vcpu_mmap_size</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>, <a class="struct" href="struct.Error.html" title="struct kvm_ioctls::Error">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Returns the size of the memory mapping required to use the vcpu’s <code>kvm_run</code> structure.</p>
<p>See the documentation for <code>KVM_GET_VCPU_MMAP_SIZE</code>.</p>
<h5 id="example-7"><a href="#example-7">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="ident">Kvm::new</span>().<span class="ident">unwrap</span>();
<span class="macro">assert!</span>(<span class="ident">kvm</span>.<span class="ident">get_vcpu_mmap_size</span>().<span class="ident">unwrap</span>() <span class="op">&gt;</span> <span class="number">0</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_nr_vcpus" class="method has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#260-267">source</a></span><a href="#method.get_nr_vcpus" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.get_nr_vcpus" class="fnname">get_nr_vcpus</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>Gets the recommended number of VCPUs per VM.</p>
<p>See the documentation for <code>KVM_CAP_NR_VCPUS</code>.
Default to 4 when <code>KVM_CAP_NR_VCPUS</code> is not implemented.</p>
<h5 id="example-8"><a href="#example-8">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="ident">Kvm::new</span>().<span class="ident">unwrap</span>();
<span class="comment">// We expect the number of vCPUs to be &gt; 0 as per KVM API documentation.</span>
<span class="macro">assert!</span>(<span class="ident">kvm</span>.<span class="ident">get_nr_vcpus</span>() <span class="op">&gt;</span> <span class="number">0</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_nr_memslots" class="method has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#283-290">source</a></span><a href="#method.get_nr_memslots" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.get_nr_memslots" class="fnname">get_nr_memslots</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>Returns the maximum allowed memory slots per VM.</p>
<p>KVM reports the number of available memory slots (<code>KVM_CAP_NR_MEMSLOTS</code>)
using the extension interface.  Both x86 and s390 implement this, ARM
and powerpc do not yet enable it.
Default to 32 when <code>KVM_CAP_NR_MEMSLOTS</code> is not implemented.</p>
<h5 id="example-9"><a href="#example-9">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="ident">Kvm::new</span>().<span class="ident">unwrap</span>();
<span class="macro">assert!</span>(<span class="ident">kvm</span>.<span class="ident">get_nr_memslots</span>() <span class="op">&gt;</span> <span class="number">0</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_max_vcpus" class="method has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#305-310">source</a></span><a href="#method.get_max_vcpus" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.get_max_vcpus" class="fnname">get_max_vcpus</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>Gets the recommended maximum number of VCPUs per VM.</p>
<p>See the documentation for <code>KVM_CAP_MAX_VCPUS</code>.
Returns <a href="struct.Kvm.html#method.get_nr_vcpus">get_nr_vcpus()</a> when
<code>KVM_CAP_MAX_VCPUS</code> is not implemented.</p>
<h5 id="example-10"><a href="#example-10">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="ident">Kvm::new</span>().<span class="ident">unwrap</span>();
<span class="macro">assert!</span>(<span class="ident">kvm</span>.<span class="ident">get_max_vcpus</span>() <span class="op">&gt;</span> <span class="number">0</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_max_vcpu_id" class="method has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#325-330">source</a></span><a href="#method.get_max_vcpu_id" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.get_max_vcpu_id" class="fnname">get_max_vcpu_id</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a></h4></section></summary><div class="docblock"><p>Gets the Maximum VCPU ID per VM.</p>
<p>See the documentation for <code>KVM_CAP_MAX_VCPU_ID</code>
Returns <a href="struct.Kvm.html#method.get_max_vcpus">get_max_vcpus()</a> when
<code>KVM_CAP_MAX_VCPU_ID</code> is not implemented</p>
<h5 id="example-11"><a href="#example-11">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="ident">Kvm::new</span>().<span class="ident">unwrap</span>();
<span class="macro">assert!</span>(<span class="ident">kvm</span>.<span class="ident">get_max_vcpu_id</span>() <span class="op">&gt;</span> <span class="number">0</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_emulated_cpuid" class="method has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#376-378">source</a></span><a href="#method.get_emulated_cpuid" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.get_emulated_cpuid" class="fnname">get_emulated_cpuid</a>(&amp;self, num_entries: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="type" href="../kvm_bindings/x86/fam_wrappers/type.CpuId.html" title="type kvm_bindings::x86::fam_wrappers::CpuId">CpuId</a>, <a class="struct" href="struct.Error.html" title="struct kvm_ioctls::Error">Error</a>&gt;</h4></section></summary><div class="docblock"><p>X86 specific call to get the system emulated CPUID values.</p>
<p>See the documentation for <code>KVM_GET_EMULATED_CPUID</code>.</p>
<h5 id="arguments-5"><a href="#arguments-5">Arguments</a></h5>
<ul>
<li><code>num_entries</code> - Maximum number of CPUID entries. This function can return less than
this when the hardware does not support so many CPUID entries.</li>
</ul>
<p>Returns Error <code>errno::Error(libc::ENOMEM)</code> when the input <code>num_entries</code> is greater than
<code>KVM_MAX_CPUID_ENTRIES</code>.</p>
<h5 id="example-12"><a href="#example-12">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">kvm_bindings</span>;
<span class="kw">use</span> <span class="ident">kvm_bindings::KVM_MAX_CPUID_ENTRIES</span>;
<span class="kw">use</span> <span class="ident">kvm_ioctls::Kvm</span>;

<span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="ident">Kvm::new</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cpuid</span> <span class="op">=</span> <span class="ident">kvm</span>.<span class="ident">get_emulated_cpuid</span>(<span class="ident">KVM_MAX_CPUID_ENTRIES</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">cpuid_entries</span> <span class="op">=</span> <span class="ident">cpuid</span>.<span class="ident">as_mut_slice</span>();
<span class="macro">assert!</span>(<span class="ident">cpuid_entries</span>.<span class="ident">len</span>() <span class="op">&lt;</span><span class="op">=</span> <span class="ident">KVM_MAX_CPUID_ENTRIES</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_supported_cpuid" class="method has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#405-407">source</a></span><a href="#method.get_supported_cpuid" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.get_supported_cpuid" class="fnname">get_supported_cpuid</a>(&amp;self, num_entries: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="type" href="../kvm_bindings/x86/fam_wrappers/type.CpuId.html" title="type kvm_bindings::x86::fam_wrappers::CpuId">CpuId</a>, <a class="struct" href="struct.Error.html" title="struct kvm_ioctls::Error">Error</a>&gt;</h4></section></summary><div class="docblock"><p>X86 specific call to get the system supported CPUID values.</p>
<p>See the documentation for <code>KVM_GET_SUPPORTED_CPUID</code>.</p>
<h5 id="arguments-6"><a href="#arguments-6">Arguments</a></h5>
<ul>
<li><code>num_entries</code> - Maximum number of CPUID entries. This function can return less than
this when the hardware does not support so many CPUID entries.</li>
</ul>
<p>Returns Error <code>errno::Error(libc::ENOMEM)</code> when the input <code>num_entries</code> is greater than
<code>KVM_MAX_CPUID_ENTRIES</code>.</p>
<h5 id="example-13"><a href="#example-13">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">extern</span> <span class="kw">crate</span> <span class="ident">kvm_bindings</span>;
<span class="kw">use</span> <span class="ident">kvm_bindings::KVM_MAX_CPUID_ENTRIES</span>;
<span class="kw">use</span> <span class="ident">kvm_ioctls::Kvm</span>;

<span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="ident">Kvm::new</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cpuid</span> <span class="op">=</span> <span class="ident">kvm</span>.<span class="ident">get_supported_cpuid</span>(<span class="ident">KVM_MAX_CPUID_ENTRIES</span>).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">cpuid_entries</span> <span class="op">=</span> <span class="ident">cpuid</span>.<span class="ident">as_mut_slice</span>();
<span class="macro">assert!</span>(<span class="ident">cpuid_entries</span>.<span class="ident">len</span>() <span class="op">&lt;</span><span class="op">=</span> <span class="ident">KVM_MAX_CPUID_ENTRIES</span>);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.get_msr_index_list" class="method has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#422-442">source</a></span><a href="#method.get_msr_index_list" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.get_msr_index_list" class="fnname">get_msr_index_list</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="type" href="../kvm_bindings/x86/fam_wrappers/type.MsrList.html" title="type kvm_bindings::x86::fam_wrappers::MsrList">MsrList</a>, <a class="struct" href="struct.Error.html" title="struct kvm_ioctls::Error">Error</a>&gt;</h4></section></summary><div class="docblock"><p>X86 specific call to get list of supported MSRS</p>
<p>See the documentation for <code>KVM_GET_MSR_INDEX_LIST</code>.</p>
<h5 id="example-14"><a href="#example-14">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">kvm_ioctls::Kvm</span>;

<span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="ident">Kvm::new</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">msr_index_list</span> <span class="op">=</span> <span class="ident">kvm</span>.<span class="ident">get_msr_index_list</span>().<span class="ident">unwrap</span>();</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.create_vm" class="method has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#460-462">source</a></span><a href="#method.create_vm" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.create_vm" class="fnname">create_vm</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.VmFd.html" title="struct kvm_ioctls::VmFd">VmFd</a>, <a class="struct" href="struct.Error.html" title="struct kvm_ioctls::Error">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Creates a VM fd using the KVM fd.</p>
<p>See the documentation for <code>KVM_CREATE_VM</code>.
A call to this function will also initialize the size of the vcpu mmap area using the
<code>KVM_GET_VCPU_MMAP_SIZE</code> ioctl.</p>
<h5 id="example-15"><a href="#example-15">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="ident">Kvm::new</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">vm</span> <span class="op">=</span> <span class="ident">kvm</span>.<span class="ident">create_vm</span>().<span class="ident">unwrap</span>();
<span class="comment">// Check that the VM mmap size is the same reported by `KVM_GET_VCPU_MMAP_SIZE`.</span>
<span class="macro">assert!</span>(<span class="ident">vm</span>.<span class="ident">run_size</span>() <span class="op">==</span> <span class="ident">kvm</span>.<span class="ident">get_vcpu_mmap_size</span>().<span class="ident">unwrap</span>());</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.create_vm_with_type" class="method has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#540-552">source</a></span><a href="#method.create_vm_with_type" class="anchor"></a><h4 class="code-header">pub fn <a href="#method.create_vm_with_type" class="fnname">create_vm_with_type</a>(&amp;self, vm_type: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.u64.html">u64</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.VmFd.html" title="struct kvm_ioctls::VmFd">VmFd</a>, <a class="struct" href="struct.Error.html" title="struct kvm_ioctls::Error">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Creates a VM fd using the KVM fd of a specific type.</p>
<p>See the documentation for <code>KVM_CREATE_VM</code>.
A call to this function will also initialize the size of the vcpu mmap area using the
<code>KVM_GET_VCPU_MMAP_SIZE</code> ioctl.</p>
<ul>
<li><code>vm_type</code> - Platform and architecture specific platform VM type. A value of 0 is the equivalent
to using the default VM type.</li>
</ul>
<h5 id="example-16"><a href="#example-16">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="ident">Kvm::new</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">vm</span> <span class="op">=</span> <span class="ident">kvm</span>.<span class="ident">create_vm_with_type</span>(<span class="number">0</span>).<span class="ident">unwrap</span>();
<span class="comment">// Check that the VM mmap size is the same reported by `KVM_GET_VCPU_MMAP_SIZE`.</span>
<span class="macro">assert!</span>(<span class="ident">vm</span>.<span class="ident">run_size</span>() <span class="op">==</span> <span class="ident">kvm</span>.<span class="ident">get_vcpu_mmap_size</span>().<span class="ident">unwrap</span>());</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.create_vmfd_from_rawfd" class="method has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#581-584">source</a></span><a href="#method.create_vmfd_from_rawfd" class="anchor"></a><h4 class="code-header">pub unsafe fn <a href="#method.create_vmfd_from_rawfd" class="fnname">create_vmfd_from_rawfd</a>(&amp;self, fd: <a class="type" href="https://doc.rust-lang.org/nightly/std/os/fd/raw/type.RawFd.html" title="type std::os::fd::raw::RawFd">RawFd</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.VmFd.html" title="struct kvm_ioctls::VmFd">VmFd</a>, <a class="struct" href="struct.Error.html" title="struct kvm_ioctls::Error">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Creates a VmFd object from a VM RawFd.</p>
<h5 id="arguments-7"><a href="#arguments-7">Arguments</a></h5>
<ul>
<li><code>fd</code> - the RawFd used for creating the VmFd object.</li>
</ul>
<h5 id="safety"><a href="#safety">Safety</a></h5>
<p>This function is unsafe as the primitives currently returned have the contract that
they are the sole owner of the file descriptor they are wrapping. Usage of this function
could accidentally allow violating this contract which can cause memory unsafety in code
that relies on it being true.</p>
<p>The caller of this method must make sure the fd is valid and nothing else uses it.</p>
<h5 id="example-17"><a href="#example-17">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="ident">Kvm::new</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">vm</span> <span class="op">=</span> <span class="ident">kvm</span>.<span class="ident">create_vm</span>().<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">rawfd</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">libc::dup</span>(<span class="ident">vm</span>.<span class="ident">as_raw_fd</span>()) };
<span class="macro">assert!</span>(<span class="ident">rawfd</span> <span class="op">&gt;</span><span class="op">=</span> <span class="number">0</span>);
<span class="kw">let</span> <span class="ident">vm</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">kvm</span>.<span class="ident">create_vmfd_from_rawfd</span>(<span class="ident">rawfd</span>).<span class="ident">unwrap</span>() };</code></pre></div>
</div></details></div></details></div><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor"></a></h2><div id="trait-implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-AsRawFd" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#587-591">source</a></span><a href="#impl-AsRawFd" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/std/os/fd/raw/trait.AsRawFd.html" title="trait std::os::fd::raw::AsRawFd">AsRawFd</a> for <a class="struct" href="struct.Kvm.html" title="struct kvm_ioctls::Kvm">Kvm</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.as_raw_fd" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#588-590">source</a></span><a href="#method.as_raw_fd" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/std/os/fd/raw/trait.AsRawFd.html#tymethod.as_raw_fd" class="fnname">as_raw_fd</a>(&amp;self) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/std/os/fd/raw/type.RawFd.html" title="type std::os::fd::raw::RawFd">RawFd</a></h4></section></summary><div class='docblock'><p>Extracts the raw file descriptor. <a href="https://doc.rust-lang.org/nightly/std/os/fd/raw/trait.AsRawFd.html#tymethod.as_raw_fd">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Debug" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#27">source</a></span><a href="#impl-Debug" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> for <a class="struct" href="struct.Kvm.html" title="struct kvm_ioctls::Kvm">Kvm</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.fmt" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#27">source</a></span><a href="#method.fmt" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt" class="fnname">fmt</a>(&amp;self, f: &amp;mut <a class="struct" href="https://doc.rust-lang.org/nightly/core/fmt/struct.Formatter.html" title="struct core::fmt::Formatter">Formatter</a>&lt;'_&gt;) -&gt; <a class="type" href="https://doc.rust-lang.org/nightly/core/fmt/type.Result.html" title="type core::fmt::Result">Result</a></h4></section></summary><div class='docblock'><p>Formats the value using the given formatter. <a href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html#tymethod.fmt">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-FromRawFd" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#593-626">source</a></span><a href="#impl-FromRawFd" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/std/os/fd/raw/trait.FromRawFd.html" title="trait std::os::fd::raw::FromRawFd">FromRawFd</a> for <a class="struct" href="struct.Kvm.html" title="struct kvm_ioctls::Kvm">Kvm</a></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from_raw_fd" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="../src/kvm_ioctls/ioctls/system.rs.html#621-625">source</a></span><a href="#method.from_raw_fd" class="anchor"></a><h4 class="code-header">unsafe fn <a href="https://doc.rust-lang.org/nightly/std/os/fd/raw/trait.FromRawFd.html#tymethod.from_raw_fd" class="fnname">from_raw_fd</a>(fd: <a class="type" href="https://doc.rust-lang.org/nightly/std/os/fd/raw/type.RawFd.html" title="type std::os::fd::raw::RawFd">RawFd</a>) -&gt; Self</h4></section></summary><div class="docblock"><p>Creates a new Kvm object assuming <code>fd</code> represents an existing open file descriptor
associated with <code>/dev/kvm</code>.</p>
<p>For usage examples check <a href="struct.Kvm.html#method.open_with_cloexec">open_with_cloexec()</a>.</p>
<h5 id="arguments-8"><a href="#arguments-8">Arguments</a></h5>
<ul>
<li><code>fd</code> - File descriptor for <code>/dev/kvm</code>.</li>
</ul>
<h5 id="safety-1"><a href="#safety-1">Safety</a></h5>
<p>This function is unsafe as the primitives currently returned have the contract that
they are the sole owner of the file descriptor they are wrapping. Usage of this function
could accidentally allow violating this contract which can cause memory unsafety in code
that relies on it being true.</p>
<p>The caller of this method must make sure the fd is valid and nothing else uses it.</p>
<h5 id="example-18"><a href="#example-18">Example</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let</span> <span class="ident">kvm_fd</span> <span class="op">=</span> <span class="ident">Kvm::open_with_cloexec</span>(<span class="bool-val">true</span>).<span class="ident">unwrap</span>();
<span class="comment">// Safe because we verify that the fd is valid in `open_with_cloexec` and we own the fd.</span>
<span class="kw">let</span> <span class="ident">kvm</span> <span class="op">=</span> <span class="kw">unsafe</span> { <span class="ident">Kvm::from_raw_fd</span>(<span class="ident">kvm_fd</span>) };</code></pre></div>
</div></details></div></details></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor"></a></h2><div id="synthetic-implementations-list"><section id="impl-RefUnwindSafe" class="impl has-srclink"><a href="#impl-RefUnwindSafe" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.RefUnwindSafe.html" title="trait core::panic::unwind_safe::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.Kvm.html" title="struct kvm_ioctls::Kvm">Kvm</a></h3></section><section id="impl-Send" class="impl has-srclink"><a href="#impl-Send" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.Kvm.html" title="struct kvm_ioctls::Kvm">Kvm</a></h3></section><section id="impl-Sync" class="impl has-srclink"><a href="#impl-Sync" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.Kvm.html" title="struct kvm_ioctls::Kvm">Kvm</a></h3></section><section id="impl-Unpin" class="impl has-srclink"><a href="#impl-Unpin" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.Kvm.html" title="struct kvm_ioctls::Kvm">Kvm</a></h3></section><section id="impl-UnwindSafe" class="impl has-srclink"><a href="#impl-UnwindSafe" class="anchor"></a><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/nightly/core/panic/unwind_safe/trait.UnwindSafe.html" title="trait core::panic::unwind_safe::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.Kvm.html" title="struct kvm_ioctls::Kvm">Kvm</a></h3></section></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor"></a></h2><div id="blanket-implementations-list"><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Any" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#132-136">source</a></span><a href="#impl-Any" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.type_id" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/any.rs.html#133">source</a></span><a href="#method.type_id" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id" class="fnname">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4></section></summary><div class='docblock'><p>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html#tymethod.type_id">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Borrow%3CT%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#209-214">source</a></span><a href="#impl-Borrow%3CT%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.borrow" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#211">source</a></span><a href="#method.borrow" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow" class="fnname">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;</a>T</h4></section></summary><div class='docblock'><p>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-BorrowMut%3CT%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#218-222">source</a></span><a href="#impl-BorrowMut%3CT%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.borrow_mut" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/91522" title="Tracking issue for const_borrow">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/borrow.rs.html#219">source</a></span><a href="#method.borrow_mut" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fnname">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.reference.html">&amp;mut </a>T</h4></section></summary><div class='docblock'><p>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/nightly/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-From%3CT%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#554-559">source</a></span><a href="#impl-From%3CT%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.from" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#556">source</a></span><a href="#method.from" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html#tymethod.from" class="fnname">from</a>(t: T) -&gt; T</h4></section></summary><div class="docblock"><p>Returns the argument unchanged.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-Into%3CU%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#538-549">source</a></span><a href="#impl-Into%3CU%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.into" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#546">source</a></span><a href="#method.into" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html#tymethod.into" class="fnname">into</a>(self) -&gt; U</h4></section></summary><div class="docblock"><p>Calls <code>U::from(self)</code>.</p>
<p>That is, this conversion is whatever the implementation of
<code><a href="https://doc.rust-lang.org/nightly/core/convert/trait.From.html" title="From">From</a>&lt;T&gt; for U</code> chooses to do.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-TryFrom%3CU%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#595-604">source</a></span><a href="#impl-TryFrom%3CU%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Error" class="type trait-impl has-srclink"><a href="#associatedtype.Error" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" class="associatedtype">Error</a> = <a class="enum" href="https://doc.rust-lang.org/nightly/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4></section></summary><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_from" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#601">source</a></span><a href="#method.try_from" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#tymethod.try_from" class="fnname">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'><p>Performs the conversion.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><section id="impl-TryInto%3CU%3E" class="impl has-srclink"><span class="rightside"><a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#580-589">source</a></span><a href="#impl-TryInto%3CU%3E" class="anchor"></a><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,&nbsp;</span></h3></section></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><section id="associatedtype.Error-1" class="type trait-impl has-srclink"><a href="#associatedtype.Error-1" class="anchor"></a><h4 class="code-header">type <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#associatedtype.Error" class="associatedtype">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4></section></summary><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.try_into" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="const unstable">const: <a href="https://github.com/rust-lang/rust/issues/88674" title="Tracking issue for const_convert">unstable</a></span> · <a class="srclink" href="https://doc.rust-lang.org/nightly/src/core/convert/mod.rs.html#586">source</a></span><a href="#method.try_into" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/nightly/core/convert/trait.TryInto.html#tymethod.try_into" class="fnname">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="associatedtype" href="https://doc.rust-lang.org/nightly/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4></section></summary><div class='docblock'><p>Performs the conversion.</p>
</div></details></div></details></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="kvm_ioctls" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.61.0-nightly (285fa7ecd 2022-03-14)" ></div>
</body></html>